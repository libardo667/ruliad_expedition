// Auto-generated by tools/decompose.mjs â€” edit freely after generation
// Source: ruliad_expedition_v1.1.html
// Module: js/core/utils.js

export class RNG{constructor(seed){this.s=seed>>>0;}next(){this.s=(Math.imul(this.s,1664525)+1013904223)>>>0;return this.s/0xFFFFFFFF;}jitter(scale=0.07){return (this.next()-0.5)*scale;}}

export function clampInt(v,min,max){const n=Number.isFinite(Number(v))?Math.round(Number(v)):min;return Math.max(min,Math.min(max,n));}

export function escapeHtml(str){return String(str||"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("\"","&quot;");}

export function hashString(str){let h=2166136261;for(let i=0;i<str.length;i++){h^=str.charCodeAt(i);h=Math.imul(h,16777619)>>>0;}return h.toString(16).padStart(8,"0");}

export function parseOptionalIntInput(raw,min,max,{odd=false}={}){
  const txt=String(raw??"").trim();
  if(!txt) return null;
  const num=Number(txt);
  if(!Number.isFinite(num)) return null;
  let value=clampInt(num,min,max);
  if(odd&&value%2===0) value=Math.min(max,value+1);
  return value;
}

export function parseOptionalInt(raw,min,max){
  return parseOptionalIntInput(raw,min,max);
}

export function structuredCloneSafe(obj){try{return structuredClone(obj);}catch{return JSON.parse(JSON.stringify(obj||{}));}}

export function safeHttpUrl(url){const text=String(url||"").trim();if(/^https?:\/\//i.test(text)) return text;return "";}
